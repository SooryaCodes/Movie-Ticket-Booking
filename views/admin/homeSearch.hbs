<link rel="stylesheet" href="/stylesheets/admin/home.css" />
<script src="/javascripts/admin/script.js"></script>
<!--main boxes-->
<div class="main-box">
  <div class="boxes boxes11">
    <div class="box-wrapper">
      <div class="box">
        <div class="box-content">
          <span>
            User's
          </span>
          <p class="box-data ">

          </p>
        </div>
      </div>
    </div>
    <div class="box-wrapper">
      <div class="box">
        <div class="box-content">
          <span>
            Owner's
          </span>
          <p>
            {{ownersLength.oLength}}
          </p>
        </div>
      </div>
    </div>
  </div>
  <div class="boxes">
    <div class="box-wrapper2">
      <div class="box">
        <div class="box-content">
          <span>Movie's</span>

          <p class="box-data ">

          </p>
        </div>
      </div>
    </div>
    <div class="box-wrapper2">
      <div class="box">
        <div class="box-content">
          <span>
            Bookings's
          </span>
          <p class="box-data ">

          </p>
        </div>
      </div>
    </div>
  </div>
</div>
<!-- ---charts--- -->
<div class="admin-chart">
  <div class="chart1">
    <canvas id="lineChart"></canvas>
    <!--Grid row-->
  </div>
  <div class="chart2">
    <canvas id="barChart"></canvas>
  </div>
</div>

<!--table -->
<div class="admin-table">

  <table>
    <tr>
      <td>
        <form action="/admin/search" method="POST">
          <input type="text" name="search" id="">
          <input type="submit" name="" id="">
        </form>
      </td>
    </tr>
    <tr>

      <th>
        No
      </th>
      <th>
        Owner
      </th>
      <th>
        Theater
      </th>
      <th>
        Action
      </th>
    </tr>
    {{#each OwnerDetails}}
    <tr>
      <td id="row">

      </td>
      <td>
        <img src="/images/owner/profile/owner{{this._id}}.jpg"
          style="width: 50px; height: 50px; object-fit: cover; border-radius: 50%; margin-right: 5px;" alt="">
        {{this.Name}}
      </td>
      <td>
        {{this.Theater}}
      </td>
      <td>
        <a href="/admin/edit-owner/{{this._id}}">
          <img src="/images/admin/edit-2.svg" alt="" />
        </a>
        <a onclick="deleteOwner('{{this._id}}')">
          <img src="/images/admin/trash (1).svg" alt="" />
        </a>
      </td>
    </tr>
    {{/each}}
  </table>
</div>
<script>
  function deleteOwner(ownerId) {
    var confirmDelete = confirm('Are You Sure Want To Delete')
    if (confirmDelete) {
      $.ajax({
        url: '/admin/delete-owner/' + ownerId,
        data: ownerId,
        method: 'post',
        success: (response) => {

          console.log(response.status)
          if (response.status) {
            swal({
              title: "Deleted",
              text: "Successfully",
              icon: "success",
              button: false
            }); setTimeout(function () {
              location.reload()
            }, 2000)


          }
        }
      })
    }

  }
</script>
<script>
  // ---chart script---

  var ctxL = document.getElementById("barChart").getContext("2d");
  var gradientFill = ctxL.createLinearGradient(0, 0, 0, 290);
  gradientFill.addColorStop(0, "#5e97ff");
  gradientFill.addColorStop(1, "rgba(0,146,255,0.1)");
  var myLineChart = new Chart(ctxL, {
    type: "bar",
    data: {
      labels: ["March", "March", "April", "May", "June", "July"],
      datasets: [
        {
          label: "My First dataset",
          data: [30, 65, 45, 65, 35, 65, 0],
          backgroundColor: gradientFill,
          borderWidth: 2,
        },
      ],
    },
    options: {
      responsive: true,
    },
  });

  var ctxL = document.getElementById("lineChart").getContext("2d");
  var gradientFill = ctxL.createLinearGradient(0, 0, 0, 290);
  gradientFill.addColorStop(0, "rgba(173, 53, 186, 1)");
  gradientFill.addColorStop(1, "rgba(173, 53, 186, 0.1)");
  var myLineChart = new Chart(ctxL, {
    type: "line",
    data: {
      labels: ["January", "February", "March", "April", "May", "June", "July"],
      datasets: [
        {
          label: "My First dataset",
          data: [0, 65, 45, 65, 35, 65, 0],
          backgroundColor: gradientFill,
          borderColor: ["#AD35BA"],
          borderWidth: 2,
          pointBorderColor: "#fff",
          pointBackgroundColor: "rgba(173, 53, 186, 0.1)",
        },
      ],
    },
    options: {
      responsive: true,
    },
  });
</script>